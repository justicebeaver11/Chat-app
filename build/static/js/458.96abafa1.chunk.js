"use strict";(self.webpackChunkchat_app=self.webpackChunkchat_app||[]).push([[458],{1460:(n,e,a)=>{a.d(e,{A:()=>r});a(5043);const r=a.p+"static/media/logo.ccfbd90732828204fa6989c0f15638c0.svg"},8444:(n,e,a)=>{a.r(e),a.d(e,{default:()=>V});var r,t=a(7528),s=a(5043),i=a(4574),c=a(854),o=a.n(c),d=a(3216),l=a(2804),m=a(1460),u=a(579);function g(n){let{contacts:e,currentUser:a,changeChat:r}=n;const[t,i]=(0,s.useState)(void 0),[c,o]=(0,s.useState)(void 0),[d,l]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{a&&(o(a.avatarImage),i(a.username))}),[a]);return(0,u.jsx)(u.Fragment,{children:c&&c&&(0,u.jsxs)(h,{children:[(0,u.jsxs)("div",{className:"brand",children:[(0,u.jsx)("img",{src:m.A,alt:"logo"}),(0,u.jsx)("h3",{children:"snappy"})]}),(0,u.jsx)("div",{className:"contacts",children:e.map(((n,e)=>(0,u.jsxs)("div",{className:"contact ".concat(e===d?"selected":""),onClick:()=>((n,e)=>{l(n),r(e)})(e,n),children:[(0,u.jsx)("div",{className:"avatar",children:(0,u.jsx)("img",{src:"data:image/svg+xml;base64,".concat(n.avatarImage),alt:"avatar"})}),(0,u.jsx)("div",{className:"username",children:(0,u.jsx)("h3",{children:n.username})})]},e)))}),(0,u.jsxs)("div",{className:"current-user",children:[(0,u.jsx)("div",{className:"avatar",children:(0,u.jsx)("img",{src:"data:image/svg+xml;base64,".concat(c),alt:"avatar"})}),(0,u.jsx)("div",{className:"username",children:(0,u.jsx)("h2",{children:t})})]})]})})}const h=i.Ay.div(r||(r=(0,t.A)(["\ndisplay: grid;\n  grid-template-rows: 10% 75% 15%;\n  overflow: hidden;\n  background-color: #080420;\n  .brand {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n    justify-content: center;\n    img {\n      height: 2rem;\n    }\n    h3 {\n      color: white;\n      text-transform: uppercase;\n    }\n  }\n  .contacts {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    overflow: auto;\n    gap: 0.8rem;\n     &::-webkit-scrollbar {\n      width: 0.2rem;\n      &-thumb {\n        background-color: #ffffff39;\n        width: 0.1rem;\n        border-radius: 1rem;\n      }\n    }\n     .contact {\n      background-color: #ffffff34;\n      min-height: 5rem;\n      width: 90%;\n       cursor: pointer;\n        border-radius: 0.2rem;\n      padding: 0.4rem;\n      display: flex;\n      gap: 1rem;\n      align-items: center;\n      transition: 0.5s ease-in-out;\n      .avatar{\n        img{\n            height: 3rem;\n        }\n      }\n       .username {\n        h3 {\n          color: white;\n        }\n      }\n    }\n    .selected {\n      background-color: #9a86f3;\n    }\n     }\n .current-user {\n    background-color: #0d0d30;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 2rem;\n    .avatar {\n      img {\n        height: 4rem;\n        max-inline-size: 100%;\n      }\n    }\n    .username {\n      h2 {\n        color: white;\n      }\n    }\n    @media screen and (min-width: 720px) and (max-width: 1080px) {\n      gap: 0.5rem;\n      .username {\n        h2 {\n          font-size: 1rem;\n        }\n      }\n    }\n  }\n"]))),f=a.p+"static/media/robot.0617a41936621e9697cd.gif";var p;function x(n){let{currentUser:e}=n;return(0,u.jsxs)(v,{children:[(0,u.jsx)("img",{src:f,alt:"Robot"}),(0,u.jsxs)("h1",{children:["Welcome, ",(0,u.jsxs)("span",{children:[e.username,"!"]})]}),(0,u.jsx)("h3",{children:"Please select a chat to Start messaging."})]})}const v=i.Ay.div(p||(p=(0,t.A)(["\ndisplay: flex;\n  justify-content: center;\n  align-items: center;\n  color: white;\n  flex-direction: column;\n  img {\n    height: 20rem;\n  }\n  span {\n    color: #4e0eff;\n  }\n"])));var j,b=a(7805);function w(){const n=(0,d.Zp)();return(0,u.jsx)(y,{onClick:async()=>{localStorage.clear(),n("/login")},children:(0,u.jsx)(b.ES$,{})})}const y=i.Ay.button(j||(j=(0,t.A)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0.5rem;\n  border-radius: 0.5rem;\n  background-color: #9a86f3;\n  border: none;\n  cursor: pointer;\n  svg {\n    font-size: 1.3rem;\n    color: #ebe7ff;\n  }\n"])));var k,S=a(9454),N=a.n(S),A=a(2127),C=a(4960);function E(n){let{handleSendMsg:e}=n;const[a,r]=(0,s.useState)(!1),[t,i]=(0,s.useState)("");return(0,u.jsxs)(_,{children:[(0,u.jsx)("div",{className:"button-container",children:(0,u.jsxs)("div",{className:"emoji",children:[(0,u.jsx)(A.F2r,{onClick:()=>{r(!a)}}),a&&(0,u.jsx)(N(),{onEmojiClick:(n,e)=>{let a=t;a+=e.emoji,i(a)}})]})}),(0,u.jsxs)("form",{className:"input-container",onSubmit:n=>(n.preventDefault(),void(t.length>0&&(e(t),i("")))),children:[(0,u.jsx)("input",{type:"text",placeholder:"type your message here",onChange:n=>i(n.target.value),value:t}),(0,u.jsx)("button",{className:"submit",children:(0,u.jsx)(C.ylI,{})})]})]})}const _=i.Ay.div(k||(k=(0,t.A)(["\ndisplay: grid;\n  align-items: center;\n  grid-template-columns: 5% 95%;\n  background-color: #080420;\n  padding: 0 2rem;\n  padding: 0.3rem;\n   @media screen and (min-width: 720px) and (max-width: 1080px) {\n    padding: 0 1rem;\n    gap: 1rem;\n  }\n  .button-container {\n    display: flex;\n    align-items: center;\n    color: white;\n    gap: 1rem;\n    .emoji {\n      position: relative;\n      svg {\n        font-size: 1.5rem;\n        color: #ffff00c8;\n        cursor: pointer;\n      }\n       .emoji-picker-react {\n        position: absolute;\n        top: -350px;\n        background-color: #080420;\n        box-shadow: 0 5px 10px #9a86f3;\n        border-color: #9a86f3;\n         .emoji-scroll-wrapper::-webkit-scrollbar {\n          background-color: #080420;\n          width: 5px;\n          &-thumb {\n            background-color: #9a86f3;\n          }\n        }\n         .emoji-categories {\n          button {\n            filter: contrast(0);\n          }\n        }\n        .emoji-search {\n          background-color: transparent;\n          border-color: #9a86f3;\n        }\n         .emoji-group:before {\n          background-color: #080420;\n        }\n       }\n    }\n}\n .input-container {\n    width: 100%;\n    border-radius: 2rem;\n    display: flex;\n    align-items: center;\n    gap: 2rem;\n    background-color: #ffffff34;\n    input {\n      width: 90%;\n      background-color: transparent;\n      color: white;\n      border: none;\n      padding-left: 1rem;\n      font-size: 1.2rem;\n\n      &::selection {\n        background-color: #9a86f3;\n      }\n      &:focus {\n        outline: none;\n      }\n    }\n    button {\n      padding: 0.3rem 2rem;\n      border-radius: 2rem;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      background-color: #9a86f3;\n      border: none;\n      @media screen and (min-width: 720px) and (max-width: 1080px) {\n        padding: 0.3rem 1rem;\n        svg {\n          font-size: 1rem;\n        }\n      }\n      svg {\n        font-size: 2rem;\n        color: white;\n      }\n    }\n}\n"])));var z;i.Ay.div(z||(z=(0,t.A)(["\nheight: 80%;\n"])));var I,U=a(2073);function Z(n){let{currentChat:e,currentUser:a,socket:r}=n;const[t,i]=(0,s.useState)([]),[c,d]=(0,s.useState)(null),m=(0,s.useRef)();(0,s.useEffect)((async()=>{if(e){const n=await o().post(l.dZ,{from:a._id,to:e._id});i(n.data)}}),[e]);return(0,s.useEffect)((()=>{r.current&&r.current.on("msg-recieve",(n=>{d({fromSelf:!1,message:n})}))}),[]),(0,s.useEffect)((()=>{c&&i((n=>[...n,c]))}),[c]),(0,s.useEffect)((()=>{var n;null===(n=m.current)||void 0===n||n.scrollIntoView({behavior:"smooth"})}),[t]),(0,u.jsx)(u.Fragment,{children:e&&(0,u.jsxs)(R,{children:[(0,u.jsxs)("div",{className:"chat-header",children:[(0,u.jsxs)("div",{className:"user-details",children:[(0,u.jsx)("div",{className:"avatar",children:(0,u.jsx)("img",{src:"data:image/svg+xml;base64,".concat(e.avatarImage),alt:""})}),(0,u.jsx)("div",{className:"username",children:(0,u.jsx)("h3",{children:e.username})})]}),(0,u.jsx)(w,{})]}),(0,u.jsx)("div",{className:"chat-messages",children:t.map((n=>(0,u.jsx)("div",{ref:m,children:(0,u.jsx)("div",{className:"message ".concat(n.fromSelf?"sended":"recieved"),children:(0,u.jsx)("div",{className:"content",children:(0,u.jsx)("p",{children:n.message})})})},(0,U.A)())))}),(0,u.jsx)(E,{handleSendMsg:async n=>{await o().post(l.$G,{from:a._id,to:e._id,message:n}),r.current.emit("send-msg",{to:e._id,from:a._id,message:n});const s=[...t];s.push({fromSelf:!0,message:n}),i(s)}})]})})}const R=i.Ay.div(I||(I=(0,t.A)(["\npadding-top: 1rem;\ndisplay: grid;\n  grid-template-rows: 10% 80% 10%;\n  gap: 0.1rem;\n  overflow: hidden;\n  @media screen and (min-width: 720px) and (max-width: 1080px) {\n    grid-template-rows: 15% 70% 15%;\n  }\n.chat-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 2rem;\n    .user-details {\n      display: flex;\n      align-items: center;\n      gap: 1rem;\n      .avatar {\n        img {\n          height: 3rem;\n        }\n      }\n      .username {\n        h3 {\n          color: white;\n        }\n      }\n    }\n  }\n.chat-messages {\n    padding: 1rem 2rem;\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n    overflow: auto;\n    &::-webkit-scrollbar {\n      width: 0.2rem;\n      &-thumb {\n        background-color: #ffffff39;\n        width: 0.1rem;\n        border-radius: 1rem;\n      }\n    }\n     .message {\n      display: flex;\n      align-items: center;\n      .content {\n        max-width: 40%;\n        overflow-wrap: break-word;\n        padding: 1rem;\n        font-size: 1.1rem;\n        border-radius: 1rem;\n        color: #d1d1d1;\n      }\n    }\n    .sended {\n      justify-content: flex-end;\n      .content {\n        background-color: #4f04ff21;\n      }\n    }\n    .recieved {\n      justify-content: flex-start;\n      .content {\n        background-color: #9900ff20;\n  }\n}\n}\n\n\n"])));var F,O=a(9958);function V(){const n=(0,s.useRef)(),e=(0,d.Zp)(),[a,r]=(0,s.useState)([]),[t,i]=(0,s.useState)(void 0),[c,m]=(0,s.useState)(void 0),[h,f]=(0,s.useState)(!1);(0,s.useEffect)((async()=>{localStorage.getItem("chat-app-user")?(i(await JSON.parse(localStorage.getItem("chat-app-user"))),f(!0)):e("/login")}),[]),(0,s.useEffect)((()=>{t&&(n.current=(0,O.io)(l.Hc),n.current.emit("add-user",t._id))}),[t]),(0,s.useEffect)((async()=>{if(t)if(t.isAvatarImageSet){const n=await o().get("".concat(l.tO,"/").concat(t._id));r(n.data)}else e("/setAvatar")}),[t]);return(0,u.jsx)($,{children:(0,u.jsxs)("div",{className:"container",children:[(0,u.jsx)(g,{contacts:a,currentUser:t,changeChat:n=>{m(n)}}),h&&void 0===c?(0,u.jsx)(x,{currentUser:t}):(0,u.jsx)(Z,{currentChat:c,currentUser:t,socket:n})]})})}const $=i.Ay.div(F||(F=(0,t.A)(["\n height: 100vh;\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 1rem;\n  align-items: center;\n  background-color: #131324;\n  .container {\n    height: 85vh;\n    width: 85vw;\n    background-color: #00000076;\n    display: grid;\n    grid-template-columns: 25% 75%;\n    @media screen and (min-width: 720px) and (max-width: 1080px) {\n      grid-template-columns: 35% 65%;\n    }\n  }\n"])))},2804:(n,e,a)=>{a.d(e,{$G:()=>o,Hc:()=>r,R6:()=>t,VV:()=>s,ZL:()=>i,dZ:()=>d,tO:()=>c});const r="http://localhost:5000",t="".concat(r,"/api/auth/register"),s="".concat(r,"/api/auth/login"),i="".concat(r,"/api/auth/setavatar"),c="".concat(r,"/api/auth/allusers"),o="".concat(r,"/api/messages/addmsg"),d="".concat(r,"/api/messages/getmsg")}}]);
//# sourceMappingURL=458.96abafa1.chunk.js.map